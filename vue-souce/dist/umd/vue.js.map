{"version":3,"file":"vue.js","sources":["../../src/util/index.js","../../src/observe/array.js","../../src/observe/index.js","../../src/state.js","../../src/compile/parser-html.js","../../src/compile/index.js","../../src/init.js","../../src/index.js"],"sourcesContent":["export function isObject(data) {\r\n  return typeof data === \"object\" && data !== null;\r\n}\r\nexport function def(object, key, value) {\r\n  Object.defineProperty(object, key, {\r\n    enumerable: false, //不可枚举\r\n    configurable: false, //不可改写\r\n    value,\r\n  });\r\n}\r\n","// 只需要重写会改变原数组的方法,7个,\r\n\r\nlet oldArrayMethods = Array.prototype;\r\n\r\nexport let arrayMethods = Object.create(oldArrayMethods); //原型链  新类 的__proto__ 指向 oldArrayMethods\r\n\r\nconst methods = [\"pop\", \"push\", \"unshift\", \"shift\", \"reverse\", \"sort\", \"splice\"];\r\n\r\nmethods.forEach((method) => {\r\n  arrayMethods[method] = function (...args) {\r\n    // AOP切片编程\r\n    const result = oldArrayMethods[method].apply(this, args);\r\n    // 如果插入的参数,还是一个对象\r\n    let inserted;\r\n    switch (method) {\r\n      case \"push\":\r\n      case \"unshift\":\r\n        inserted = args;\r\n        break;\r\n      case \"splice\": // splice 中间有删除  新增  替换 只需要观测第三个参数\r\n        inserted = args.slice(2);\r\n\r\n      default:\r\n        break;\r\n    }\r\n    let ob = this.__ob__;\r\n    if (inserted) {\r\n      ob.observeArray(inserted);\r\n    }\r\n    return result;\r\n  };\r\n});\r\n","import { isObject, def } from \"../util/index\";\r\nimport { arrayMethods } from \"./array.js\";\r\n\r\nclass Observe {\r\n  constructor(value) {\r\n    // 数据越复杂 层次越深 越费性能,vue2使用递归来给数据定义get 和set\r\n    if (Array.isArray(value)) {\r\n      // 如果是数组的话,并不应去检测数组的索引,浪费性能\r\n      // 但是监控数组的 push pop shift unshift\r\n      value.__ob__ = this; // 方便其他模块调用实例方法\r\n      def(value, \"__ob__\", this);\r\n      value.__proto__ = arrayMethods;\r\n      this.observeArray(value); // 对数组内容拦截\r\n    } else {\r\n      this.walk(value);\r\n    }\r\n  }\r\n  walk(data) {\r\n    let keys = Object.keys(data);\r\n    keys.forEach((key) => {\r\n      defineReactive(data, key, data[key]);\r\n    });\r\n  }\r\n  observeArray(value) {\r\n    for (let i = 0; i < value.length; i++) {\r\n      observe(value[i]);\r\n    }\r\n  }\r\n}\r\nfunction defineReactive(data, key, value) {\r\n  //响应式核心\r\n  observe(value);\r\n  Object.defineProperty(data, key, {\r\n    set(newValue) {\r\n      if (newValue === value) return;\r\n      observe(newValue); // 更换数据后,继续添加监听\r\n      value = newValue;\r\n    },\r\n    get() {\r\n      return value;\r\n    },\r\n  });\r\n}\r\n\r\nexport function observe(data) {\r\n  if (!isObject(data)) {\r\n    return;\r\n  }\r\n  return new Observe(data);\r\n}\r\n","import { observe } from \"./observe/index.js\";\r\nexport function initState(vm) {\r\n  const opts = vm.$options;\r\n  // vue 的数据来源 属性 方法 数据 计算属性 watch\r\n  if (opts.props) {\r\n    initProps(vm);\r\n  }\r\n  if (opts.methods) {\r\n    initMethod(vm);\r\n  }\r\n  if (opts.data) {\r\n    initData(vm);\r\n  }\r\n  if (opts.computed) {\r\n    initComputed(vm);\r\n  }\r\n  if (opts.watch) {\r\n    initWatch(vm);\r\n  }\r\n}\r\nfunction initProps() {}\r\nfunction initMethod() {}\r\nfunction initData(vm) {\r\n  //初始化数据\r\n  let data = vm.$options.data;\r\n  data = typeof data === \"function\" ? data.call(vm) : data;\r\n  vm._data = data;\r\n  //对象劫持 用户改变了数据 我希望可以得到通知 => 刷新页面\r\n  // MVVM 数据变化 驱动 视图变化\r\n  // Object.definedProperty(); 给属性增加 set 和 get 方法\r\n  observe(data); //响应式原理\r\n}\r\nfunction initComputed() {}\r\nfunction initWatch() {}\r\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\r\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\r\n\r\nlet root = null;\r\nlet currentParent; //记录当前的父亲是谁\r\nlet stack = [];\r\nconst ELEMENT_TYPE = 1;\r\nconst TEXT_TYPE = 3;\r\n\r\nfunction creatAstElement(tagName, attrs) {\r\n\treturn {\r\n\t\ttag: tagName,\r\n\t\ttype: ELEMENT_TYPE,\r\n\t\tchildren: [],\r\n\t\tattrs,\r\n\t\tparent: null,\r\n\t};\r\n}\r\n\r\nfunction start(tagName, attrs) {\r\n\tlet element = creatAstElement(tagName, attrs);\r\n\tif (!root) {\r\n\t\troot = element;\r\n\t}\r\n\tcurrentParent = element;\r\n\tstack.push(element); //在当前栈中存放开始标签\r\n}\r\nfunction chars(text) {\r\n\ttext = text.replace(/\\s/g, \"\");\r\n\tif (text) {\r\n\t\tcurrentParent.children.push({\r\n\t\t\ttext,\r\n\t\t\ttype: TEXT_TYPE,\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction end(tagName) {\r\n\tlet element = stack.pop(); // 取出栈中的最后一个\r\n\tcurrentParent = stack[stack.length - 1];\r\n\tif(currentParent){\r\n\t\telement.parent = currentParent;\r\n\t\tcurrentParent.children.push(element);\r\n\t}\r\n}\r\n export function parseHTML(html) {\r\n\twhile (html) {\r\n\t\tlet textEnd = html.indexOf(\"<\");\r\n\t\tif (textEnd == 0) {\r\n\t\t\tconst startTagMatch = parseStartTag();\r\n\t\t\tif (startTagMatch) {\r\n\t\t\t\tstart(startTagMatch.tagName, startTagMatch.attrs);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tconst endTagMatch = html.match(endTag);\r\n\t\t\tif (endTagMatch) {\r\n\t\t\t\tadvance(endTagMatch[0].length);\r\n\t\t\t\tend(endTagMatch[1]);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet text;\r\n\t\tif (textEnd >= 0) {\r\n\t\t\ttext = html.substring(0, textEnd);\r\n\t\t}\r\n\t\tif (text) {\r\n\t\t\tadvance(text.length);\r\n\t\t\tchars(text);\r\n\t\t}\r\n\t}\r\n\tfunction advance(n) {\r\n\t\thtml = html.substring(n);\r\n\t}\r\n\tfunction parseStartTag() {\r\n\t\tconst start = html.match(startTagOpen);\r\n\t\tif (start) {\r\n\t\t\tconst match = {\r\n\t\t\t\ttagName: start[1],\r\n\t\t\t\tattrs: [],\r\n\t\t\t};\r\n\t\t\tadvance(start[0].length);\r\n\t\t\tlet attr, end;\r\n\t\t\twhile (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n\t\t\t\tadvance(attr[0].length);\r\n\t\t\t\tmatch.attrs.push({ name: attr[1], value: attr[3] });\r\n\t\t\t}\r\n\t\t\tif (end) {\r\n\t\t\t\tadvance(end[0].length);\r\n\t\t\t\treturn match;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn root;\r\n}","import { parseHTML } from \"./parser-html\";\r\nfunction gen(node) {\r\n\tif (node.type == 1) {\r\n\t\treturn generate(node);\r\n\t} else {\r\n\t\tlet text = node.text;\r\n\t\tif (!defaultTagRE.test(text)) {\r\n\t\t\treturn `_v(${JSON.stringify(text)})`;\r\n\t\t}\r\n\t\tlet lastIndex = (defaultTagRE.lastIndex = 0);\r\n\t\tlet tokens = [];\r\n\t\tlet match, index;\r\n\r\n\t\twhile ((match = defaultTagRE.exec(text))) {\r\n\t\t\tindex = match.index;\r\n\t\t\tif (index > lastIndex) {\r\n\t\t\t\ttokens.push(JSON.stringify(text.slice(lastIndex, index)));\r\n\t\t\t}\r\n\t\t\ttokens.push(`_s(${match[1].trim()})`);\r\n\t\t\tlastIndex = index + match[0].length;\r\n\t\t}\r\n\t\tif (lastIndex < text.length) {\r\n\t\t\ttokens.push(JSON.stringify(text.slice(lastIndex)));\r\n\t\t}\r\n\t\treturn `_v(${tokens.join(\"+\")})`;\r\n\t}\r\n}\r\nfunction getChildren(el) {\r\n\t// 生成儿子节点\r\n\tconst children = el.children;\r\n\tif (children) {\r\n\t\treturn `${children.map((c) => gen(c)).join(\",\")}`;\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n}\r\nfunction genProps(attrs) {\r\n\t// 生成属性\r\n\tlet str = \"\";\r\n\tfor (let i = 0; i < attrs.length; i++) {\r\n\t\tlet attr = attrs[i];\r\n\t\tif (attr.name === \"style\") {\r\n\t\t\tlet obj = {};\r\n\t\t\tattr.value.split(\";\").forEach((item) => {\r\n\t\t\t\tlet [key, value] = item.split(\":\");\r\n\t\t\t\tobj[key] = value;\r\n\t\t\t});\r\n\t\t\tattr.value = obj;\r\n\t\t}\r\n\t\tstr += `${attr.name}:${JSON.stringify(attr.value)},`;\r\n\t}\r\n\treturn `{${str.slice(0, -1)}}`;\r\n}\r\nfunction generate(el) {\r\n\tlet children = getChildren(el);\r\n\tlet code = `_c('${el.tag}',${el.attrs.length ? `${genProps(el.attrs)}` : \"undefined\"}${children ? `,${children}` : \"\"})`;\r\n\treturn code;\r\n}\r\nexport function compileToFunctions(template) {\r\n\tlet root = parseHTML(template);\r\n\tlet code = generate(root);\r\n\tlet render = `with(this){return ${code}}`;\r\n\tlet renderFn = new Function(render);\r\n\treturn renderFn;\r\n}\r\n","import { initState } from \"./state.js\";\r\nimport { compileToFunctions } from \"./compile/index.js\";\r\nexport function initMixin(Vue) {\r\n\t//初始化流程\r\n\tVue.prototype._init = function (options) {\r\n\t\t//数据的劫持\r\n\t\tconst vm = this; // vue 中使用 this.$options 指代的就是用户传递的属性\r\n\t\tvm.$options = options;\r\n\t\tinitState(vm);\r\n\r\n\t\t// 如果用户传入了 el ,需要将页面渲染出来\r\n\t\tif (vm.$options.el) {\r\n\t\t\tvm.$mount(vm.$options.el);\r\n\t\t}\r\n\t};\r\n\tVue.prototype.$mount = function (el) {\r\n\t\tlet vm = this;\r\n\t\tlet options = vm.$options;\r\n\t\tel = document.querySelector(el);\r\n\t\t//默认先会查找有没有render函数 ,没有render 采用template template也没有就用el中的内容\r\n\r\n\t\tif (!options.render) {\r\n\t\t\t//对模板进行编译\r\n\t\t\tlet template = options.template;\r\n\t\t\tif (!template && el) {\r\n\t\t\t\ttemplate = el.outerHTML;\r\n\t\t\t}\r\n\t\t\tconst render = compileToFunctions(template);\r\n\t\t\toptions.render = render;\r\n\t\t\t//需要将template 转换成render 方法;\r\n\t\t}\r\n\t\toptions.render();\r\n\t};\r\n}\r\n","// Vue 声明文件\r\nimport { initMixin } from \"./init.js\";\r\nfunction Vue(option) {\r\n  this._init(option);\r\n}\r\ninitMixin(Vue);\r\n\r\nexport default Vue;\r\n"],"names":["isObject","data","def","object","key","value","Object","defineProperty","enumerable","configurable","oldArrayMethods","Array","prototype","arrayMethods","create","methods","forEach","method","args","result","apply","inserted","slice","ob","__ob__","observeArray","Observe","isArray","__proto__","walk","keys","defineReactive","i","length","observe","set","newValue","get","initState","vm","opts","$options","props","initData","computed","watch","call","_data","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","root","currentParent","stack","ELEMENT_TYPE","TEXT_TYPE","creatAstElement","tagName","attrs","tag","type","children","parent","start","element","push","chars","text","replace","end","pop","parseHTML","html","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","gen","node","generate","defaultTagRE","test","JSON","stringify","lastIndex","tokens","index","exec","trim","join","getChildren","el","map","c","genProps","str","obj","split","item","code","compileToFunctions","template","render","renderFn","Function","initMixin","Vue","_init","options","$mount","document","querySelector","outerHTML","option"],"mappings":"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"}